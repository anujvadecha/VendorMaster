(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"013f":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"window-height window-width row justify-center items-center"},[s("div",{staticClass:"column q-pa-lg"},[s("strong",{staticClass:"text-h6"},[t._v(t._s(t.message))]),s("q-card-section",{},[s("div",{staticClass:"row"},[s("q-img",{attrs:{src:t.imageSrc,transition:"scale-transition",width:"50px"}}),s("strong",{staticClass:"text-h6 q-ml-md q-my-md"},[t._v("DeltaBX")])],1)]),s("q-separator",{attrs:{color:"orange",size:"5px"}}),s("q-card-section",[s("q-form",{staticClass:"q-gutter-y-md"},[s("q-input",{attrs:{color:"primary",outlined:"",type:"email",label:"Username"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"mdi-account"}})]},proxy:!0}]),model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("q-input",{attrs:{color:"primary",outlined:"",type:"password",label:"Password"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"mdi-lock"}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),s("q-card-actions",{staticClass:"q-px-lg"},[s("q-btn",{staticClass:"full-width text-white",attrs:{unelevated:"",size:"lg",color:"primary",label:"Sign In"},on:{click:function(e){return t.login_action()}}})],1),s("q-card-section",{staticClass:"text-center q-pa-sm"},[s("p",{staticClass:"text-grey-6"},[t._v(" Forgot your password? ")]),s("p",[t._v("Not a registered user ? Register "),s("router-link",{attrs:{to:"/register"}},[t._v("here")])],1)])],1)])])},n=[],a=s("2a19"),i=s("c993"),r={name:"Login",data(){return{email:"",password:"",imageSrc:"logo.png"}},methods:{login_action:function(){console.log(this.email+this.password),this.connect_jwt()},connect_websocket:function(){const t=this.$store;document.cookie="authorization="+this.$q.localStorage.getItem("token")+";";const e="ws://127.0.0.1:8000/ws/ticker/?"+this.$q.localStorage.getItem("token"),s=new WebSocket(e);s.onopen=function(){s.send(JSON.stringify({type:"ticker_request",message:"Please send all symbols"})),s.send(JSON.stringify({type:"vendor_request",message:"Please send all vendors"}))},s.onmessage=function(e){var s=JSON.parse(e.data);if(s.instruments){var o=JSON.parse(s.instruments);let e=JSON.parse(s.favourites);e=e.map((t=>t.instrument_id)),o=o.map((t=>(t.is_favourite=!1,t)));for(let t=0;t<o.length;t++)for(let s=0;s<e.length;s++)e[s]===o[t].instrument_id&&(console.log("setting instrument"),o[t].is_favourite=!0);t.dispatch("push_instruments",o)}if(s.gold_tick&&t.dispatch("update_prices",s),s.instrument_update){console.log("instrument_update received"),console.log(s);var n=JSON.parse(s.instrument_update);console.log(n),t.dispatch("update_instrument",n)}if(s.vendors){console.log(s.vendors);var a=s.vendors.map((t=>(t.theme=JSON.parse(t.theme)[0],t.vendor_details=JSON.parse(t.vendor_details)[0],t)));t.dispatch("push_vendors",a)}s.order_update&&console.log(s)},s.onclose=function(t){console.log(t),setTimeout((function(){this.connect_jwt()}),2e3)}},connect_jwt:function(){const t=this.$store,e=this.$router;var o=s("bc3a"),n={username:this.email,password:this.password},r={method:"post",url:i["c"]+"/api/rest-auth/login/",headers:{"Content-Type":"application/json"},data:n};a["a"].create({message:r.url,position:"top",timeout:5e3});const c=this.$q;o(r).then((function(s){t.dispatch("set_token",s.data.key),c.localStorage.set("token",s.data.key),e.push("Home")})).catch((function(t){console.log(t.response.data),a["a"].create({message:t.response.data.non_field_errors[0],position:"top",timeout:5e3})}))}},props:["message"]},c=r,l=(s("7805"),s("2877")),d=s("a370"),p=s("068f"),u=s("eb85"),m=s("0378"),g=s("27f9"),h=s("0016"),f=s("4b7e"),_=s("9c40"),w=s("f09f"),v=s("eebe"),q=s.n(v),y=Object(l["a"])(c,o,n,!1,null,"37761b12",null);e["default"]=y.exports;q()(y,"components",{QCardSection:d["a"],QImg:p["a"],QSeparator:u["a"],QForm:m["a"],QInput:g["a"],QIcon:h["a"],QCardActions:f["a"],QBtn:_["a"],QCard:w["a"]})},"0b9d":function(t,e,s){},7805:function(t,e,s){"use strict";s("0b9d")}}]);