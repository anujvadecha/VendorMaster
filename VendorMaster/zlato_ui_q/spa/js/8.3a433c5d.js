(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0b35":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("q-pull-to-refresh",{on:{refresh:t.refresher}},[t.$store.state.orders_to_rate.length>0?r("div",t._l(t.$store.state.orders_to_rate,(function(t){return r("div",{key:t.order_id},[r("Rating",{attrs:{data:[t.instrument_id.vendor_id,t.instrument_id.vendor,!0]}})],1)})),0):t._e(),r("div",{},[r("div",{staticClass:"q-gutter-y-md"},[r("q-card",{attrs:{flat:""}},[r("q-tabs",{staticClass:"text-grey",attrs:{"active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"",stretch:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("q-tab",{attrs:{name:"executed",label:"Executed"}}),r("q-tab",{attrs:{name:"pending",label:"Pending"}}),r("q-tab",{attrs:{name:"closed",label:"Closed"}})],1),r("q-separator"),r("q-tab-panels",{attrs:{swipeable:"",animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("q-tab-panel",{attrs:{name:"executed"}},[r("ExecutedOrders",{attrs:{waiting:t.$store.state.executed_orders_waiting,confirmed:t.$store.state.executed_orders_confirmed}})],1),r("q-tab-panel",{attrs:{name:"pending"}},[r("PendingOrders",{attrs:{pending:t.$store.state.active_orders,refresh:this.refresher}})],1),r("q-tab-panel",{attrs:{name:"closed"}},[r("ClosedOrders",{attrs:{closed:t.$store.state.closed_orders}})],1)],1)],1)],1)])])],1)},s=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.waiting.length>0||t.confirmed.length>0?r("div",[r("div",{},[r("OrderItemTable",{attrs:{orders:t.confirmed,title:"Confirmed"}}),r("OrderItemTable",{attrs:{orders:t.waiting,title:"Waiting"}})],1)]):r("div",[r("div",{staticClass:"row align-middle"},[r("div",{staticClass:"center"},[r("q-img",{staticClass:"q-ml-lg",attrs:{width:"200px",src:"Human.png"}})],1),r("q-card",{staticClass:"q-ma-md"},[r("div",{staticClass:"text-h6 font-bold q-ma-lg"},[t._v("No Executed orders")]),r("div",{staticClass:" q-ma-lg"},[t._v("To place an order. Please go to  "),r("q-btn",{on:{click:function(e){return t.$router.push("Home")}}},[t._v("Home")])],1)])],1)])])},o=[],n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.orders.length>0?r("div",[r("q-table",{attrs:{grid:"","card-class":"bg-primary text-white",title:t.title,data:t.orders,"row-key":"name",filter:t.filter,"hide-header":"","hide-no-data":"",pagination:t.pagination},scopedSlots:t._u([{key:"top-right",fn:function(){return[r("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[r("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"item",fn:function(t){return[r("div",{staticClass:"q-pa-xs col-xs-12 col-sm-12 col-md-6"},[r("OrderItem",{attrs:{order:t.row}})],1)]}}],null,!1,402120872)})],1):t.best_limit_orders.length<1?r("div",[t.show_illustration?r("div",[r("div",{staticClass:"row align-middle"},[r("div",{staticClass:"center"},[r("q-img",{staticClass:"q-ml-lg",attrs:{width:"200px",src:"Human.png"}})],1),r("q-card",{staticClass:"q-ma-md"},[r("div",{staticClass:"text-h6 font-bold q-ma-lg"},[t._v("No "+t._s(t.title)+" orders")]),r("div",{staticClass:" q-ma-lg"},[t._v("To place an order. Please go to\n          "),r("q-btn",{on:{click:function(e){return t.$router.push("Home")}}},[t._v("Home")])],1)])],1)]):t._e()]):t._e(),void 0!==t.best_limit_orders?r("div",[t.best_limit_orders.length>0?r("div",[r("q-table",{attrs:{grid:"","card-class":"bg-primary text-white",title:t.title,data:t.best_limit_orders,"row-key":"name",filter:t.filter,"hide-header":"","hide-no-data":"",pagination:t.pagination},scopedSlots:t._u([{key:"top-right",fn:function(){return[r("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[r("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"item",fn:function(t){return[r("div",{staticClass:"q-pa-xs col-xs-12 col-sm-12 col-md-6"},[r("BestLimitOrderItem",{attrs:{order:t.row}})],1)]}}],null,!1,1504375389)})],1):t._e()]):t._e()])},l=[],d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("q-card",{staticClass:"my-card",attrs:{square:"",flat:"",bordered:""}},[r("q-card-actions",{attrs:{align:"right"}},[r("div",{staticClass:"justify-start"},[r("q-chip",{attrs:{outline:"",color:"black",dense:""}},[t._v("ID : "+t._s(t.order.transaction_id))])],1),"EXECUTED"===t.order.status?r("div",["BEST_LIMIT"===t.order.type?r("q-chip",{attrs:{outline:"",color:"orange",dense:""}},[t._v("BEST_LIMIT")]):t._e(),r("q-chip",{attrs:{outline:"",size:"md",color:"green",dense:""}},[t._v("Payment confirmed")]),r("q-chip",{attrs:{outline:"",color:"blue",dense:""}},[t._v("OTP:"+t._s(t.order.otp))])],1):t._e(),"OPEN"===t.order.status?r("div",["BEST_LIMIT"===t.order.type?r("q-chip",{attrs:{outline:"",color:"orange",dense:""}},[t._v("BEST_LIMIT")]):t._e(),r("q-chip",{attrs:{outline:"",color:"blue",dense:""}},[t._v("Waiting for payment")])],1):t._e(),"WAITING_FOR_LIMIT"===t.order.status?r("div",["BEST_LIMIT"===t.order.type?r("q-chip",{attrs:{outline:"",color:"orange",dense:""}},[t._v("BEST_LIMIT")]):t._e(),r("q-chip",{attrs:{outline:"",color:"blue",dense:""}},[t._v("Limit Order waiting")]),t.is_cancelled?r("q-chip",{attrs:{outline:"",color:"red",dense:""}},[t._v("Cancelled")]):r("q-btn",{attrs:{outline:"",color:"black",dense:""},on:{click:function(e){return t.cancel_limit_order()}}},[t._v("CANCEL")])],1):t._e(),"CLOSED"===t.order.status?r("div",[r("q-chip",{attrs:{outline:"",color:"green",dense:""}},[t._v("Closed")])],1):t._e()]),r("q-separator"),r("div",{on:{click:function(e){return t.set_order_details()}}},[r("div",{staticClass:"row q-ma-sm"},[r("div",{staticClass:"col"},[r("strong",[t._v(t._s(t.order.instrument.vendor))]),r("span",{staticClass:"font-bold q-ml-xs-sm "},[t._v(" "+t._s(t.order.instrument.name))])]),r("div",{staticClass:"col"},[r("div",{staticClass:"text-right align-right"},[r("div",{staticClass:"col text-right"},[t._v("Price:"+t._s(t.order.price))])])])]),r("div",{staticClass:"row q-ma-sm"},[r("div",{staticClass:"col"},[r("q-chip",{attrs:{dense:"",outline:"",color:"orange"}},[t._v(t._s(t.order.side)+" ")]),t._v(" "+t._s(t.order.quantity)+"\n        "),r("span",{staticClass:"q-ml-sm",staticStyle:{color:"grey"}},[r("q-icon",{attrs:{name:"mdi-clock"}}),t._v(t._s(t.get_formated_time))],1)],1),r("span",{staticClass:"text-sm q-ml-sm",staticStyle:{color:"grey"}},[t._v("LTP: "+t._s(t.order.instrument.ask))])])])],1)],1)},c=[],_=r("c993"),m={name:"OrderItem",props:["order"],computed:{get_formated_time(){const t=new Date(this.order.created_at);return t.toLocaleString("en-GB")},logged_in:function(){const t=this.$q.localStorage.getItem("token");return""!==t&&null!==t&&"null"!==t},is_cancelled:function(){return this.cancelled}},methods:{set_order_details(){this.$store.dispatch("set_order_details",this.order),console.log(this.$store.state.order_details_selected),this.$store.state.order_details_bottom_sheet=!0},cancel_limit_order(){console.log("limit order cancellation request for"+this.order),Object(_["e"])({order_id:this.order.order_id}).then((t=>{this.cancelled=!0}))}},data:function(){return{cancelled:!1}}},u=m,p=r("2877"),h=r("f09f"),g=r("4b7e"),v=r("b047"),f=r("9c40"),b=r("eb85"),q=r("0016"),C=r("eebe"),x=r.n(C),y=Object(p["a"])(u,d,c,!1,null,"327add6a",null),I=y.exports;x()(y,"components",{QCard:h["a"],QCardActions:g["a"],QChip:v["a"],QBtn:f["a"],QSeparator:b["a"],QIcon:q["a"]});var w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("q-card",{staticClass:"my-card",attrs:{square:"",flat:"",bordered:""}},[r("q-card-actions",{attrs:{align:"right"}},[r("div",{staticClass:"justify-start"},[r("q-chip",{attrs:{outline:"",color:"black",dense:""}},[t._v("ID : "+t._s(t.order.best_limit_id))])],1),r("q-chip",{attrs:{outline:"",color:"orange",dense:""}},[t._v("BEST_LIMIT")]),t.is_cancelled?r("q-chip",{attrs:{outline:"",color:"red",dense:""}},[t._v("Cancelled")]):r("q-btn",{attrs:{outline:"",color:"black",dense:""},on:{click:function(e){return t.cancel_limit_order()}}},[t._v("CANCEL")])],1),r("q-expansion-item",{staticClass:"font-bold",attrs:{label:t.order.orders[0].instrument.vendor+" :"+t.order.orders[0].instrument.name+"  +"+(t.order.orders.length-1)+" more"}},t._l(t.order.orders,(function(e){return r("div",{key:e.order_id},[r("q-separator"),r("div",{staticClass:"row q-ma-sm"},[r("div",{staticClass:"col"},[r("strong",[t._v(t._s(e.instrument.vendor))]),r("span",{staticClass:"font-bold q-ml-xs-sm "},[t._v(" "+t._s(e.instrument.name))])]),r("span",{staticClass:"text-right text-sm q-ml-sm",staticStyle:{color:"grey"}},[t._v("LTP: "+t._s(e.instrument.ask))])])],1)})),0),r("q-separator"),r("div",{staticClass:"row q-ma-sm"},[r("div",{staticClass:"col"},[r("q-chip",{attrs:{dense:"",outline:"",color:"orange"}},[t._v(t._s(t.order.orders[0].side)+" ")]),t._v(" "+t._s(t.order.orders[0].quantity)+"\n          "),r("span",{staticClass:"q-ml-sm",staticStyle:{color:"grey"}},[r("q-icon",{attrs:{name:"mdi-clock"}}),t._v(t._s(t.get_formated_time))],1)],1),r("div",{staticClass:"col"},[r("div",{staticClass:"text-right align-right"},[r("div",{staticClass:"col text-right"},[t._v("Price:"+t._s(t.order.orders[0].price))])])])])],1)],1)},O=[],T={name:"BestLimitOrderItem",props:["order"],computed:{get_formated_time(){const t=new Date(this.order.orders[0].created_at);return t.toLocaleString("en-GB")},logged_in:function(){const t=this.$q.localStorage.getItem("token");return""!==t&&null!==t&&"null"!==t},is_cancelled:function(){return this.cancelled}},methods:{cancel_limit_order(){console.log(this.order.orders),this.order.orders.map((t=>{Object(_["e"])({order_id:t.order_id}).then((t=>{this.cancelled=!0}))}))}},data:function(){return{cancelled:!1}},created(){}},Q=T,k=r("3b73"),S=Object(p["a"])(Q,w,O,!1,null,"b7d4f1ac",null),E=S.exports;x()(S,"components",{QCard:h["a"],QCardActions:g["a"],QChip:v["a"],QBtn:f["a"],QExpansionItem:k["a"],QSeparator:b["a"],QIcon:q["a"]});var $={name:"OrderItemTable",components:{BestLimitOrderItem:E,OrderItem:I},props:["orders","best_limit_orders","title","show_illustration"],data:function(){return{filter:"",pagination:{rowsPerPage:0}}},created(){}},P=$,L=r("eaac"),B=r("27f9"),j=r("068f"),M=Object(p["a"])(P,n,l,!1,null,"9d8c46a2",null),D=M.exports;x()(M,"components",{QTable:L["a"],QInput:B["a"],QIcon:q["a"],QImg:j["a"],QCard:h["a"],QBtn:f["a"]});var A={name:"ExecutedOrders",props:["confirmed","waiting"],components:{OrderItemTable:D},created(){console.log(this.waiting.length),console.log(this.confirmed.length)}},H=A,N=Object(p["a"])(H,i,o,!1,null,"0582aaf8",null),R=N.exports;x()(N,"components",{QImg:j["a"],QCard:h["a"],QBtn:f["a"]});var G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("OrderItemTable",{attrs:{orders:t.pending_orders,best_limit_orders:t.best_limit,show_illustration:!0,title:"Pending limit"}})],1)},V=[],W={name:"PendingOrders",components:{OrderItemTable:D},props:["pending"],data:function(){return{pending_orders:[],best_limit:[]}},created(){var t={};for(var e in this.pending.map((e=>{"BEST_LIMIT"===e.type?(e.best_limit_id in t||(t[e.best_limit_id]=[]),t[e.best_limit_id].push(e)):this.pending_orders.push(e)})),t){var r={best_limit_id:e,orders:t[e]};this.best_limit.push(r)}}},z=W,J=Object(p["a"])(z,G,V,!1,null,null,null),Y=J.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("OrderItemTable",{attrs:{show_illustration:!0,orders:t.closed}})},U=[],X={name:"ClosedOrders",components:{OrderItemTable:D},props:["closed"]},K=X,Z=Object(p["a"])(K,F,U,!1,null,"05a4a288",null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("q-dialog",{model:{value:t.card,callback:function(e){t.card=e},expression:"card"}},[r("q-card",[r("q-card-section",{staticClass:"bg-primary text-h6",staticStyle:{color:"white"}},[t._v("\n            "+t._s(t.order.instrument_id.vendor)+"\n          ")]),r("q-card-section",[r("q-rating",{attrs:{"aria-placeholder":"Please provide a rating for the Vendor!",max:5,size:"32px"},model:{value:t.stars,callback:function(e){t.stars=e},expression:"stars"}})],1),r("q-card-section",[r("div",[r("q-input",{attrs:{label:"Please leave a review here ...",filled:"",type:"textarea",cols:"33",rows:"10",autogrow:""},model:{value:t.rating_text,callback:function(e){t.rating_text=e},expression:"rating_text"}})],1)]),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{attrs:{flat:"",color:"primary",label:"Submit"},on:{click:t.rateVendor}})],1)],1)],1)],1)},rt=[],at=r("2a19"),st={name:"Rating",props:["data"],methods:{rateVendor(){if(!this.stars)return void at["a"].create({message:"Please provide a rating for the given vendor",position:"top-right"});if(this.stars>2)this.card=!1;else if(this.stars<3&&0===this.rating_text.length)return void at["a"].create({message:"Please provide a review for rating below 3",position:"top-right"});this.card=!1;const t={vendor_id:this.order.instrument_id.vendor_id,rating:this.stars,rating_text:this.rating_text,is_rated:!0,order_id:this.order.order_id};Object(_["j"])(t).then((t=>{console.log(t),at["a"].create({message:"Your review has been successfully delivered!",position:"top-right"}),this.order.is_rated=!0})).catch((t=>{console.log(t),at["a"].create({message:"Your rating could not be submitted!",position:"top-right"})}))}},data(){return{order:[],card:!1,rating_text:"",stars:""}},created(){this.order=this.data[0],this.card=this.data[1],console.log("Created of rating!"),console.log(this.data)}},it=st,ot=r("24e8"),nt=r("a370"),lt=r("daf4"),dt=Object(p["a"])(it,et,rt,!1,null,"0fd9c923",null),ct=dt.exports;x()(dt,"components",{QDialog:ot["a"],QCard:h["a"],QCardSection:nt["a"],QRating:lt["a"],QInput:B["a"],QSeparator:b["a"],QCardActions:g["a"],QBtn:f["a"]});var _t={name:"Orders",components:{ClosedOrders:tt,PendingOrders:Y,ExecutedOrders:R,Rating:ct},data(){return{tab:"executed"}},methods:{refresher(t){Object(_["f"])().then((t=>{this.$store.dispatch("set_orders",t)})),t()},set_orders(){console.log("Setting orders")}},created(){this.$store.state.rightDrawerOpen=!1,Object(_["f"])().then((t=>{this.$store.dispatch("set_orders",t)}))}},mt=_t,ut=r("59d7"),pt=r("429b"),ht=r("7460"),gt=r("adad"),vt=r("823b"),ft=Object(p["a"])(mt,a,s,!1,null,"42d463a5",null);e["default"]=ft.exports;x()(ft,"components",{QPullToRefresh:ut["a"],QCard:h["a"],QTabs:pt["a"],QTab:ht["a"],QSeparator:b["a"],QTabPanels:gt["a"],QTabPanel:vt["a"]})}}]);